{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\josep\\\\Documents\\\\GitHub\\\\safepass\\\\src\\\\features\\\\login\\\\TeacherLoginStep.tsx\";\nimport React from 'react';\nimport { Text, Button, Spinner, Input } from '@ui-kitten/components';\nimport View from \"react-native-web/dist/exports/View\";\nimport DefaultLayout from \"../../components/layouts/DefaultLayout\";\nimport { auth } from \"../../components/FirebaseAuthenticator\";\nimport { useDispatch } from 'react-redux';\n\nfunction validateEmail(email) {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nvar TeacherLoginStep = function TeacherLoginStep(_ref) {\n  var navigation = _ref.navigation;\n  var dispatch = useDispatch();\n\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      email = _React$useState2[0],\n      setEmail = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      password = _React$useState4[0],\n      setPassword = _React$useState4[1];\n\n  var _React$useState5 = React.useState(true),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      isLoading = _React$useState6[0],\n      setIsLoading = _React$useState6[1];\n\n  var handleNext = function handleNext() {\n    if (!password) {\n      alert('Please enter your password');\n    }\n\n    if (!validateEmail(email)) {\n      alert('Please enter a valid email address');\n    }\n\n    setIsLoading(true);\n    auth.signInWithEmailAndPassword(email, password).catch(function (err) {\n      var errorCode = err.code;\n      var errorMesage = err.message;\n      alert(err.message + ' (Error Code: ' + errorCode + ') \\n Please check your credentials and try again.');\n      setIsLoading(false);\n      return;\n    });\n    setIsLoading(false);\n    navigation.navigate('TeacherLoginStep');\n  };\n\n  var LoadingIndicator = function LoadingIndicator() {\n    return React.createElement(View, {\n      style: {\n        justifyContent: 'center',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 5\n      }\n    }, React.createElement(Spinner, {\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  return React.createElement(DefaultLayout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    category: \"h1\",\n    style: {\n      marginTop: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, \"Login\"), React.createElement(Text, {\n    category: \"s1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"Enter the email and password as provided by your school district.\"), React.createElement(Input, {\n    size: \"large\",\n    style: {\n      width: '100%',\n      marginTop: 50,\n      marginBottom: 10\n    },\n    placeholder: \"Email Address\",\n    caption: \"Enter the email that you were provided to sign in with. This may be your district email address.\",\n    value: email,\n    onChangeText: function onChangeText(text) {\n      return setEmail(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), React.createElement(Input, {\n    size: \"large\",\n    style: {\n      width: '100%',\n      marginBottom: 20\n    },\n    placeholder: \"Password\",\n    caption: \"Enter the password that you were provided or previously set.\",\n    value: password,\n    onChangeText: function onChangeText(text) {\n      return setPassword(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'flex-end',\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: 'center',\n      marginBottom: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"By pressing \\\"Next\\\", you agree to our Terms and that you have read our Data Use Policy\"), React.createElement(Button, {\n    accessoryLeft: isLoading ? LoadingIndicator : null,\n    appearance: 'outline',\n    onPress: handleNext,\n    size: \"giant\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, \"Next\")));\n};\n\nexport default TeacherLoginStep;","map":{"version":3,"sources":["C:/Users/josep/Documents/GitHub/safepass/src/features/login/TeacherLoginStep.tsx"],"names":["React","Text","Button","Spinner","Input","DefaultLayout","auth","useDispatch","validateEmail","email","re","test","String","toLowerCase","TeacherLoginStep","navigation","dispatch","useState","setEmail","password","setPassword","isLoading","setIsLoading","handleNext","alert","signInWithEmailAndPassword","catch","err","errorCode","code","errorMesage","message","navigate","LoadingIndicator","justifyContent","alignItems","marginTop","width","marginBottom","text","flex","textAlign"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Layout,\n  Text,\n  Autocomplete,\n  AutocompleteItem,\n  Button,\n  Icon,\n  Spinner,\n  Input,\n} from '@ui-kitten/components';\nimport { KeyboardAvoidingView, Platform, FlatList, View, Alert } from 'react-native';\nimport DefaultLayout from '../../components/layouts/DefaultLayout';\nimport { db, auth } from '../../components/FirebaseAuthenticator';\nimport LottieView from 'lottie-react-native';\nimport { District, setupDistrict } from './setupSlice';\nimport { useDispatch } from 'react-redux';\nimport {\n  SchoolDistrictScreenNavigationProp,\n  TeacherLoginScreenNavigationProp,\n} from '../../navigation/AuthNavigation';\n\ninterface TeacherLoginStepProps {\n  navigation: TeacherLoginScreenNavigationProp;\n}\n\nfunction validateEmail(email: string) {\n  const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\nconst TeacherLoginStep = ({ navigation }: TeacherLoginStepProps) => {\n  const dispatch = useDispatch();\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(true);\n\n  const handleNext = () => {\n    // Validation\n    if (!password) {\n      alert('Please enter your password');\n    }\n    if (!validateEmail(email)) {\n      alert('Please enter a valid email address');\n    }\n\n    setIsLoading(true);\n\n    auth.signInWithEmailAndPassword(email, password).catch(err => {\n      const errorCode = err.code;\n      const errorMesage = err.message;\n\n      alert(\n        err.message +\n          ' (Error Code: ' +\n          errorCode +\n          ') \\n Please check your credentials and try again.'\n      );\n      setIsLoading(false);\n      return;\n    });\n\n    setIsLoading(false);\n    navigation.navigate('TeacherLoginStep');\n\n    // dispatch(setupDistrict(district));\n  };\n\n  const LoadingIndicator = () => (\n    <View\n      style={{\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}>\n      <Spinner size=\"small\" />\n    </View>\n  );\n\n  return (\n    <DefaultLayout>\n      <Text category=\"h1\" style={{ marginTop: 30 }}>\n        Login\n      </Text>\n      <Text category=\"s1\">Enter the email and password as provided by your school district.</Text>\n\n      <Input\n        size=\"large\"\n        style={{ width: '100%', marginTop: 50, marginBottom: 10 }}\n        placeholder=\"Email Address\"\n        caption=\"Enter the email that you were provided to sign in with. This may be your district email address.\"\n        value={email}\n        onChangeText={text => setEmail(text)}\n      />\n      <Input\n        size=\"large\"\n        style={{ width: '100%', marginBottom: 20 }}\n        placeholder=\"Password\"\n        caption=\"Enter the password that you were provided or previously set.\"\n        value={password}\n        onChangeText={text => setPassword(text)}\n      />\n\n      <View style={{ flex: 1, justifyContent: 'flex-end', marginBottom: 10 }}>\n        <Text style={{ textAlign: 'center', marginBottom: 10 }}>\n          By pressing \"Next\", you agree to our Terms and that you have read our Data Use Policy\n        </Text>\n        <Button\n          accessoryLeft={isLoading ? LoadingIndicator : null}\n          appearance={'outline'}\n          onPress={handleNext}\n          size=\"giant\">\n          Next\n        </Button>\n      </View>\n    </DefaultLayout>\n  );\n};\n\nexport default TeacherLoginStep;\n"]},"metadata":{},"sourceType":"module"}